<!DOCTYPE html>
<html>
	<head>
		<title>camera</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8">
	</head>
	<body>

		<video id="video" autoplay=""style='width:320px;height:240px'></video>
		<img id="img"/>
		<button id='picture'>PICTURE</button> 
		<canvas id="canvas" width="320" height="240"></canvas>

	    <script type="text/javascript">
window.onerror =function(e){
alert(e)

}
	        var video = document.getElementById("video");
	        var context = canvas.getContext("2d");
    			var errocb = function () {
                    alert('sth wrong!');
                }
    
    
    			if (navigator.getUserMedia) { // 标准的API
                    navigator.getUserMedia(video: { width: 1280, height: 720 }, function (stream) {
                        video.src = stream;
                        video.play();
                    }, errocb);
    			} else if(navigator.webkitGetUserMedia) { // WebKit
	                navigator.webkitGetUserMedia({ video: true }, function (stream) {
	                  //alert(s)
          	        video.src = window.webkitURL.createObjectURL(stream);
          	        
                    video.onloadedmetadata = function(e) {
                      // Do something with the video here.
                      video.play();
                    };	      
                    video.play();              
	                }, errocb);
			 }else{
			 	alert("error");
			 }
			 //拍照
			document.getElementById("picture").addEventListener("click", function () {
                context.drawImage(video, 0, 0, 640, 480);
			});
	    </script>

	</body>
</html>
